<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Create Concept & Semantic | OpenGMS</title>



    <link rel="stylesheet" type="text/css" media="screen"
          href="/static/css/font-awesome/css/font-awesome.min.css"
    />


    <!--    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/page/create-modelitem.css"/>-->

    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/other/jquery-steps.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/other/jquery.tag-editor.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/other/modelItemEditor.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/base/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/common/fabric/fabric.min.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/base/style.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/element-ui/theme-chalk/index.css"/>
    <link rel="stylesheet" href="/static/css/base/universal.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/other/bootstrap-select.css"/>
    <link rel="stylesheet" type="text/css" media="screen" href="/static/data-tables/DT_bootstrap.css"/>
    <link rel="stylesheet" th:href="@{/static/css/page/model_item_info.css}">
    <link rel="stylesheet" type="text/css" href="/static/css/page/user_space.css">
    <link rel="stylesheet" href="/static/css/common/newSideBar.css">

    <style>
    .btn-block {
        padding: 6px 12px;
    }

    tbody tr td {
        word-wrap: break-word;
        word-break: break-all;
        overflow: hidden;
    }

    .searcherPanel {
        margin-top: 30px;
    }

    .searcherPanel .searcherInputPanel {
        display: inline-flex;
        width: 100%;
    }

    .searcherPanel .searcherInputPanel input {
        font-size: 14px;
        line-height: 28px;
        display: block;
        box-sizing: border-box;
        width: 100%;
        height: 40px;
        padding: 5px 10px;
        color: #999;
        border: 1px solid #2277da;
    }

    .searcherPanel .searcherInputPanel button {
        background: #008af1;
        border: none;
        height: 40px;
        color: #fff;
        text-align: center;
        width: 92px;
        font-size: 14px;
        cursor: pointer;
        vertical-align: middle;
    }

    .searcherPanel {
        margin-top: 0px;
    }

    .content-body .list-item {
        border: solid #d8d8d8 1px;
        border-width: 1px 1px;
        padding: 15px 20px;
        padding-bottom: 13px;
    }

    .detail_title a {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        position: relative;
        padding-right: 25px;
        font-size: 20px;
        color: #333;
        margin-left: 0px;
    }

    .detail_title {
        margin-left: 10px;
    }

    .detail_overview {
        min-height: 90px;
        margin: 10px 0px 15px 8px;
    }

    .detail_option {
        float: right;
        margin-top: 5px;
    }

    .info {
        margin-top: 10px;
        margin-left: 105px;
        display: block;
        padding-top: 5px;
    }

    .el-col-6 {
        width: 25%;
    }

    .el-col-18 {
        width: 75%;
    }

    .detail_option {
        float: right;
    }

    .img {
        float: left;
    }

    hr {
        border-color: #d8d8d8;
        margin: 0px;
    }

    .el-col-20 {
        width: 98%;
    }

    .table .thMain {
        border-top: none;
    }
</style>
</head>

<body class="scrollbar">
<div id="app">
    <div id="loading" v-if="load">
        <div class="loading-center">
            <div class="loading-center-absolute">
                <div class="object"></div>
            </div>
        </div>
    </div>

    <div class="page-container" style="height: 2000px">
        <head-side-bar :user-infoin-parent="userInfo"></head-side-bar>
        <template id="createConcept" th:fragment="createConcept">
            <div class="innerShadowCol">
                <div class="page-content clearfix scrollbar el-col-lg-21 el-col-md-20 pageContent acrylicBack"
                     style="margin-left: 240px;overflow-x: hidden"
                     :style="{'height':ScreenMinHeight,'min-height':ScreenMinHeight,'max-height':ScreenMaxHeight}"
                     id="pageContent">
                    <section role="description" class="flexJustBetween flexColCenter contentSection"
                             style="max-width: 1050px;margin: 15px 10px;">
                        <div class="flexRowContainer flexColCenter" style="margin-left: 18px">
                            <img class="square_40" style="margin-top: 10px" src="../../../static/img/model/model.png">
                            <h3 style="margin-left: 10px"><a class="itemTitle" href="/user/userSpace#/community">Community </a><span
                                    id="subRteTitle"></span></h3>
                        </div>
                    </section>

                    <div class="page-content-wrap container-fluid">
                        <!-- START WIDGETS -->
                        <div class="row">

                        </div>
                        <!-- END WIDGETS -->

                        <div class="row">
                            <div class="container-fluid" id="mainInfo">
                                <div class="row">
                                    <div class="col-md-12 nopadding">
                                        <div class="panel panel-success" style="border: none">
                                            <div class="panel-body">
                                                <div id="step">
                                                    <div class="step-app">
                                                        <ul class="step-steps text-center">
                                                            <li>
                                                                <a href="#step1">Basic Info</a>
                                                            </li>
                                                            <li>
                                                                <a href="#step2">Related</a>
                                                            </li>
                                                            <li>
                                                                <a href="#step3">Content</a>
                                                            </li>
                                                        </ul>

                                                        <div class="step-content">
                                                            <div class="step-tab-panel" id="step1">
                                                                <div class="col-sm-4 tree" style="margin-top:10px">
                                                                    <el-card>
                                                                        <div slot="header" class="clearfix text-center">
                                                                            <span style="font-size: 20px;color:#444">Concept Classifications</span>
                                                                        </div>
                                                                        <el-tree style="height: 320px;overflow: auto"
                                                                                 id="tree2"
                                                                                 ref="tree2"
                                                                                 :data="treeData"
                                                                                 show-checkbox
                                                                                 node-key="id"
                                                                                 :default-expanded-keys="[]"
                                                                                 :current-node-key="100"
                                                                                 @check-change="handleCheckChange"
                                                                                 :props="defaultProps">
                                                                        </el-tree>
                                                                    </el-card>
                                                                </div>


                                                                <div class="col-sm-8" style="margin-top:10px">
                                                                    <div id="RepositoryParentsPanel">
                                                                        <div class="form-horizontal">
                                                                            <div class="form-group">
                                                                                <label for="parentNode"
                                                                                       class="col-sm-2 control-label"><span class="xing">* </span>Classifications</label>
                                                                                <div class="col-sm-10">
                                                                            <textarea class="form-control"
                                                                                      id="parentNode"
                                                                                      v-model="clsStr"
                                                                                      readonly></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-horizontal">
                                                                            <div class="form-group">
                                                                                <label for="nameInput"
                                                                                       class="col-sm-2 control-label"><span class="xing">* </span>Status</label>
                                                                                <div class="col-sm-10">
                                                                                    <el-radio-group v-model="status" size="medium">
                                                                                        <el-tooltip popper-class="fontsize-15" effect="light" content="Can be retrieved, shared and edited." placement="top">
                                                                                            <el-radio-button label="Public"></el-radio-button>
                                                                                        </el-tooltip>
                                                                                        <el-tooltip popper-class="fontsize-15" class="item" effect="light" content="Can be retrieved and shared, can ONLY be edited by creator." placement="top">
                                                                                            <el-radio-button label="Discoverable"></el-radio-button>
                                                                                        </el-tooltip>
                                                                                        <el-tooltip popper-class="fontsize-15" class="item" effect="light" content="Can NOT be retrieved and shared, can ONLY be edited by creator." placement="top">
                                                                                            <el-radio-button label="Private"></el-radio-button>
                                                                                        </el-tooltip>

                                                                                    </el-radio-group>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-horizontal">
                                                                            <div class="form-group">
                                                                                <label for="nameInput"
                                                                                       class="col-sm-2 control-label"><span class="xing">* </span>Name</label>
                                                                                <div class="col-sm-10">
                                                                                    <input type="text"
                                                                                           class="form-control"
                                                                                           id="nameInput"/>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-horizontal">
                                                                            <div class="form-group">
                                                                                <label for="descInput"
                                                                                       class="col-sm-2 control-label"><span class="xing">* </span>Overview</label>
                                                                                <div class="col-sm-10">
                                                                            <textarea rows="4" class="form-control"
                                                                                      id="descInput"></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-horizontal">
                                                                            <div class="form-group">
                                                                                <label for="nameInput"
                                                                                       class="col-sm-2 control-label">Image</label>
                                                                                <div class="col-sm-10">
                                                                                    <img id="imgShow" src=""/>
                                                                                    <div id="imgChange">
                                                                                        <i class="fa fa-plus fa-5x"></i>
                                                                                    </div>
                                                                                    <input id="imgFile" type="file"
                                                                                           style="display: none"
                                                                                           accept="image/*"/>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="step-tab-panel" id="step2">
                                                                <div class="el-col el-col-20 ">
                                                                    <div class="el-col el-col-6">
                                                                        <el-card class="box-card">
                                                                            <div slot="header"
                                                                                 class="clearfix text-center">
                                                                                <span style="font-size: 20px;color:#444">Classifications</span>
                                                                            </div>
                                                                            <el-tree
                                                                                    id="tree1"
                                                                                    ref="tree1"
                                                                                    :data="treeData"
                                                                                    :highlight-current="true"
                                                                                    :expand-on-click-node="false"
                                                                                    node-key="id"
                                                                                    :default-expanded-keys="[]"
                                                                                    :current-node-key="100"
                                                                                    @current-change="handleCurrentChange"
                                                                                    :props="defaultProps">
                                                                            </el-tree>
                                                                        </el-card>
                                                                    </div>
                                                                    <div class="el-col el-col-18"
                                                                         style="padding-left: 20px">

                                                                        <div class="form-horizontal">
                                                                            <div class="form-group">
                                                                                <label for="related" style="width:5%"
                                                                                       class="col-sm-2 control-label">Related</label>
                                                                                <div class="col-sm-10"
                                                                                     style="padding-left: 40px;width: 94%">
                                                                            <textarea class="form-control"
                                                                                      id="related"></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="searcherPanel">
                                                                            <div class="searcherInputPanel"
                                                                                 @keydown.enter="search()">
                                                                                <input id="searchBox" type="text"
                                                                                       placeholder="Please enter the name..."
                                                                                       v-model="searchText">
                                                                                <button @click="search()">Search
                                                                                </button>
                                                                            </div>
                                                                        </div>

                                                                        <div class="progressPanel">
                                                                <span class="barControl">
                                                                    <div class="barContro_space">
                                                                        <span class="progress_line"
                                                                              :class="{active:pageOption.progressBar}"></span>
                                                                    </div>
                                                                </span>
                                                                        </div>

                                                                        <div role="alert" class="alert alert-info"
                                                                             style="margin-bottom: 2px;"><span><strong>Current Classification: {{currentClass}} </strong>
                                                                <strong v-if="pageOption.progressBar"
                                                                        style="float: right;">Loading... </strong>
                                                                <strong v-if="!pageOption.progressBar"
                                                                        style="float: right;">{{pageOption.total}} items</strong></span><br>
                                                                            <span></span> <span></span>
                                                                        </div>

                                                                        <div class="modelPanel">
                                                                            <div class="content-body">
                                                                                <div v-cloak class="list-item"
                                                                                     v-for="(concept,key) in pageOption.searchResult">
                                                                                    <div class="detail_title">
                                                                                        <span :oid="concept.oid"
                                                                                              id="conceptName"
                                                                                              style="font-size: 18px">{{concept.description_EN==''?concept.alias:concept.name}}&nbsp&nbsp</span>
                                                                                        <button v-show="!concept.exist"
                                                                                                type="button"
                                                                                                id="selectConcept"
                                                                                                @click="addRelated(key)"
                                                                                                style="float: right">+
                                                                                        </button>
                                                                                        <button v-show="concept.exist"
                                                                                                type="button"
                                                                                                id="unSelectConcept"
                                                                                                @click="deleteRelated(key)"
                                                                                                style="float: right;">-
                                                                                        </button>
                                                                                    </div>
                                                                                    <div class="detail_overview">
                                                                                        <a class="img"
                                                                                           :href="'/repository/concept/'+ concept.oid"
                                                                                           target="_blank">
                                                                                            <avatar :username="concept.description_EN==''?concept.alias:concept.name"
                                                                                                    :size="90"
                                                                                                    :rounded="false"></avatar>

                                                                                        </a>

                                                                                        <div class="info">
                                                                                            <p>
                                                                                                {{concept.description_EN==''?concept.description_ZH:concept.description_EN}}</p>

                                                                                        </div>
                                                                                    </div>
                                                                                    <hr>
                                                                                    <div class="detail_bottom">
                                                                                        <div style="display:inline-block;float: left;">
                                                                                            <img src="../static/img/icon/default.png"
                                                                                                 class="round_icon"
                                                                                                 style="width: 20px; height: 20px; display: inline-block;">
                                                                                            <a href="/user/42"
                                                                                               target="_blank"
                                                                                               style="display: inline-block; margin-left: 5px;">
                                                                                                <h5>NNU_Group</h5></a>
                                                                                            <h5 style="display: inline-block;margin-left: 20px">
                                                                                                contributed at
                                                                                                {{concept.createTime.substring(0,10)}} </h5>
                                                                                        </div>
                                                                                        <div class="detail_option">
                                                                                            <a href="javascript:void(0)"
                                                                                               class="fa fa-eye"
                                                                                               aria-hidden="true"></a>&nbsp&nbsp{{concept.loadCount}}
                                                                                            <!--<a href="javascript:void(0)" class="fa fa-thumbs-o-up" aria-hidden="true"></a>&nbsp&nbsp{{modelItem.thumbsUpCount}}-->
                                                                                        </div>
                                                                                        <br>
                                                                                    </div>
                                                                                </div>

                                                                            </div>
                                                                            <el-pagination
                                                                                    style="text-align: center;margin-top:20px"
                                                                                    v-if="pageOption.paginationShow"
                                                                                    @current-change="handlePageChange"
                                                                                    :current-page="pageOption.currentPage"
                                                                                    layout="total, prev, pager, next, jumper"
                                                                                    :total="pageOption.total">
                                                                            </el-pagination>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="step-tab-panel" id="step3">
                                                        <textarea id="conceptText">
                                                            <div>
                                                                 <table class="table table-bordered"
                                                                        style=" width:100%;margin-bottom: 0px;border-collapse: collapse;border: 1px solid #ddd;"
                                                                        v-if="${conceptInfo.name_EN != ''}">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="thMain"> EN_US</th>
                                                                        </tr>
                                                                    </thead>
                                                                </table>
                                                                <table class="table table-bordered"
                                                                       style="width:100%;margin-bottom: 20px;border-collapse: collapse;border: 1px solid #ddd;"
                                                                       v-if="${conceptInfo.name_EN != ''}">
                                                                    <colgroup>
                                                                        <col width="25%">
                                                                        <col width="75%">
                                                                    </colgroup>
                                                                    <tr>
                                                                        <td>Name</td>
                                                                        <td>{{conceptInfo.name_EN}}</td>
                                                                    </tr>
                                                                    <tr v-if="${conceptInfo.description_EN != ''}">
                                                                        <td>Description</td>
                                                                        <td>{{conceptInfo.description_EN}}</td>
                                                                    </tr>
                                                                </table>
                                                                <table class="table table-bordered"
                                                                       style="width:100%;margin-bottom: 0px;border-collapse: collapse;border: 1px solid #ddd;"
                                                                       v-if="${conceptInfo.name_ZH != ''}">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="thMain"> ZH_CN</th>
                                                                        </tr>
                                                                    </thead>
                                                                </table>
                                                                <table class="table table-bordered "
                                                                       style="width:100%;margin-bottom: 20px;border-collapse: collapse;border: 1px solid #ddd;"
                                                                       v-if="${conceptInfo.name_ZH != ''}">
                                                                    <colgroup>
                                                                        <col width="25%">
                                                                        <col width="75%">
                                                                    </colgroup>
                                                                    <tr>
                                                                        <td>Name</td>
                                                                        <td>{{conceptInfo.name_ZH}}</td>
                                                                    </tr>
                                                                    <tr v-if="${conceptInfo.description_ZH != ''}">
                                                                        <td>Description</td>
                                                                        <td>{{conceptInfo.description_ZH}}</td>
                                                                    </tr>
                                                                </table>
                                                            </div>
                                                        </textarea>
                                                            </div>

                                                        </div>

                                                        <div class="step-footer text-right">
                                                            <button class="btn btn-warning prev" data-direction="prev">
                                                                Previous
                                                            </button>
                                                            <button class="btn btn-primary next" data-direction="next">
                                                                Next
                                                            </button>
                                                            <button class="btn btn-success finish"
                                                                    data-direction="finish">
                                                                Finish
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /.panel -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </template>

        </div>
</body>

<script src="/static/js/common/jquery-3.3.1.min.js"></script>
<script src="/static/js/common/bootstrap.min.js"></script>
<script src="/static/js/common/vue.min.js"></script>
<script type="text/javascript" src="/static/js/common/bootstrap-treeview.js"></script>
<script type="text/javascript" src="/static/js/common/jquery-steps.js"></script>
<script type="text/javascript" src="/static/js/common/jquery.tag-editor.js"></script>
<script type="text/javascript" src="/static/js/common/pageEn.js"></script>
<script type="text/javascript" src="/static/js/tinymce/tinymce.min.js"></script>
<script type="text/javascript" src="/static/data-tables/jquery.dataTables.js"></script>
<script type="text/javascript" src="/static/data-tables/DT_bootstrap.js"></script>


<script>
    $(document).ready(function () {

        $("#step").steps({
            onFinish: function () {
                alert('Wizard Completed');
            }
        });

        $("#refAuthor").tagEditor({
            forceLowercase: false
        })

        $("#imgChange").click(function () {
            $("#imgFile").click();
        });
        $("#imgFile").change(function () {
            //获取input file的files文件数组;
            //$('#filed')获取的是jQuery对象，.get(0)转为原生对象;
            //这边默认只能选一个，但是存放形式仍然是数组，所以取第一个元素使用[0];
            var file = $('#imgFile').get(0).files[0];
            //创建用来读取此文件的对象
            var reader = new FileReader();
            //使用该对象读取file文件
            reader.readAsDataURL(file);
            //读取文件成功后执行的方法函数
            reader.onload = function (e) {
                //读取成功后返回的一个参数e，整个的一个进度事件
                //选择所要显示图片的img，要赋值给img的src就是e中target下result里面
                //的base64编码格式的地址
                $('#imgShow').get(0).src = e.target.result;
                $('#imgShow').show();
            }
        });


    });
</script>

<script src="/static/js/common/vue-avatar.min.js"></script>
<script src="/static/js/common/bootstrap-select.js"></script>
<script src="/static/element-ui/index.js"></script>
<script src="/static/js/common/axios.min.js"></script>
<script src="/static/js/common/vue.min.js"></script>
<script src="/static/js/common/vue-router.js"></script>

<script th:replace="fragments/newSideBar :: headSideBar"></script>
<script th:replace="fragments/newSideBar :: sideBarComponent"></script>
<script src="/static/js/page/create-concept.js"></script>

</html>